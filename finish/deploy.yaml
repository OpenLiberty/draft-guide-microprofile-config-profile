# tag::system[]
apiVersion: apps.openliberty.io/v1
kind: OpenLibertyApplication
metadata:
  name: system
  labels:
    name: system
spec:
  applicationImage: system:1.0-SNAPSHOT
  service:
    port: 9080
  expose: true
  route:
    pathType: ImplementationSpecific
  # tag::system.env[]
  env:
    # tag::default.username[]
    - name: DEFAULT_USERNAME
      valueFrom:
        secretKeyRef:
          # tag::sys-app-credentials-1[]
          name: sys-app-credentials
          # end::sys-app-credentials-1[]
          key: username
    # end::default.username[]
    # tag::default.password[]
    - name: DEFAULT_PASSWORD
      valueFrom:
        secretKeyRef:
          # tag::sys-app-credentials-2[]
          name: sys-app-credentials
          # end::sys-app-credentials-2[]
          key: password
    # end::default.password[]
  # end::system.env[]
# end::system[]
---
# tag::query[]
apiVersion: apps.openliberty.io/v1
kind: OpenLibertyApplication
metadata:
  name: query
  labels:
    name: query
spec:
  applicationImage: query:1.0-SNAPSHOT
  service:
    port: 9085
  expose: true
  route:
    pathType: ImplementationSpecific
  # tag::query.env[]
  env:
    # tag::system.user[]
    - name: SYSTEM_USER
      valueFrom:
        secretKeyRef:
          # tag::sys-app-credentials-3[]
          name: sys-app-credentials
          # end::sys-app-credentials-3[]
          key: username
    # end::system.user[]
    # tag::system.password[]
    - name: SYSTEM_PASSWORD
      valueFrom:
        secretKeyRef:
          # tag::sys-app-credentials-4[]
          name: sys-app-credentials
          # end::sys-app-credentials-4[]
          key: password
    # end::system.password[]
  # end::query.env[]
# end::query[]